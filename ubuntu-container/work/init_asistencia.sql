CREATE TABLE t_estudiantes (
  "id_estudiante" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_grupo" int,
  "primer_nombre" varchar(50) NOT NULL,
  "segundo_nombre" varchar(50),
  "apellido_paterno" varchar(50),
  "apellido_materno" varchar(50)
);

CREATE TABLE t_maestros (
  "id_maestro" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "primer_nombre" varchar(50) NOT NULL,
  "segundo_nombre" varchar(50),
  "apellido_paterno" varchar(50),
  "apellido_materno" varchar(50)
);

CREATE TABLE t_materias (
  "id_materia" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre" varchar UNIQUE NOT NULL
);

CREATE TABLE t_grupos (
  "id_grupo" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre_grupo" varchar UNIQUE NOT NULL
);

CREATE TABLE t_periodos (
  "id_periodo" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre_periodo" varchar UNIQUE NOT NULL
);

CREATE TABLE t_horarios (
  "id_horario" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_grupo" int NOT NULL,
  "id_materia" int NOT NULL,
  "id_maestro" int NOT NULL,
  "id_periodo" int NOT NULL,
  "hora_inicio" time NOT NULL,
  "hora_fin" time NOT NULL
);

CREATE TABLE cat_asistencias (
  "id_tipo_asistencia" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre" varchar UNIQUE NOT NULL
);

CREATE TABLE t_asistencias (
  "id_asistencia" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_estudiante" int NOT NULL,
  "id_horario" int NOT NULL,
  "id_tipo_asistencia" int NOT NULL,
  "fecha" date NOT NULL
);

ALTER TABLE "t_estudiantes" ADD FOREIGN KEY ("id_grupo") REFERENCES "t_grupos" ("id_grupo");

ALTER TABLE "t_horarios" ADD FOREIGN KEY ("id_grupo") REFERENCES "t_grupos" ("id_grupo");

ALTER TABLE "t_horarios" ADD FOREIGN KEY ("id_materia") REFERENCES "t_materias" ("id_materia");

ALTER TABLE "t_horarios" ADD FOREIGN KEY ("id_maestro") REFERENCES "t_maestros" ("id_maestro");

ALTER TABLE "t_horarios" ADD FOREIGN KEY ("id_periodo") REFERENCES "t_periodos" ("id_periodo");

ALTER TABLE "t_asistencias" ADD FOREIGN KEY ("id_estudiante") REFERENCES "t_estudiantes" ("id_estudiante");

ALTER TABLE "t_asistencias" ADD FOREIGN KEY ("id_horario") REFERENCES "t_horarios" ("id_horario");

ALTER TABLE "t_asistencias" ADD FOREIGN KEY ("id_tipo_asistencia") REFERENCES "cat_asistencias" ("id_tipo_asistencia");

INSERT INTO t_periodos (id_periodo, nombre_periodo) VALUES
(1, '2025-1');

INSERT INTO t_grupos (id_grupo, nombre_grupo) VALUES
(1, 'G1-A'),
(2, 'G2-B'),
(3, 'G3-C');

INSERT INTO t_materias (id_materia, nombre) VALUES
(1, 'Matemáticas'),
(2, 'Programación'),
(3, 'Bases de Datos'),
(4, 'Redes');

INSERT INTO t_maestros (id_maestro, primer_nombre, segundo_nombre, apellido_paterno, apellido_materno) VALUES
(1, 'Ana', NULL, 'López', 'García'),
(2, 'Luis', 'Alberto', 'Martínez', 'Soto'),
(3, 'María', NULL, 'Ramírez', 'Torres'),
(4, 'Jorge', 'Iván', 'Hernández', 'Pérez'),
(5, 'Sofía', NULL, 'Gómez', 'Núñez');

INSERT INTO t_estudiantes (id_estudiante, id_grupo, primer_nombre, segundo_nombre, apellido_paterno, apellido_materno) VALUES
(1, 1, 'Carlos', NULL, 'Ruiz', 'Mena'),
(2, 1, 'Daniela', NULL, 'Vega', 'Salas'),
(3, 1, 'Eduardo', 'José', 'Paz', 'León'),
(4, 1, 'Fernanda', NULL, 'Zapata', 'Ibarra'),
(5, 2, 'Héctor', NULL, 'Campos', 'Díaz'),
(6, 2, 'Irene', NULL, 'Silva', 'Ríos'),
(7, 2, 'José', NULL, 'Mora', 'Prieto'),
(8, 3, 'Karla', NULL, 'Flores', 'Aguilar'),
(9, 3, 'Luis', NULL, 'Navarro', 'Serrano'),
(10, 3, 'Marcos', NULL, 'Cruz', 'Romero');

INSERT INTO cat_asistencias (id_tipo_asistencia, nombre) VALUES
(1, 'ASISTENCIA'),
(2, 'RETARDO'),
(3, 'FALTA'),
(4, 'JUSTIFICADA');

INSERT INTO t_horarios (id_horario, id_grupo, id_materia, id_maestro, id_periodo, hora_inicio, hora_fin) VALUES
(1, 1, 1, 1, 1, '09:00', '10:00');

INSERT INTO t_horarios (id_horario, id_grupo, id_materia, id_maestro, id_periodo, hora_inicio, hora_fin) VALUES
(2, 2, 2, 2, 1, '10:00', '11:00');

INSERT INTO t_horarios (id_horario, id_grupo, id_materia, id_maestro, id_periodo, hora_inicio, hora_fin) VALUES
(3, 3, 3, 3, 1, '11:00', '12:00');

INSERT INTO t_asistencias (id_asistencia, id_estudiante, id_horario, id_tipo_asistencia, fecha) VALUES
(1, 1, 1, 1, '2025-12-01'),
(2, 2, 1, 1, '2025-12-01'),
(3, 3, 1, 1, '2025-12-01'),
(4, 4, 1, 1, '2025-12-01'),
(5, 5, 1, 1, '2025-12-01'),
(6, 6, 1, 1, '2025-12-01'),
(7, 7, 1, 1, '2025-12-01'),
(8, 8, 1, 1, '2025-12-01'),
(9, 9, 1, 2, '2025-12-01'),
(10, 10, 1, 2, '2025-12-01');

INSERT INTO t_asistencias (id_asistencia, id_estudiante, id_horario, id_tipo_asistencia, fecha) VALUES
(11, 1, 1, 1, '2025-12-02'),
(12, 2, 1, 1, '2025-12-02'),
(13, 3, 1, 1, '2025-12-02'),
(14, 4, 1, 1, '2025-12-02'),
(15, 5, 1, 1, '2025-12-02'),
(16, 6, 1, 1, '2025-12-02'),
(17, 7, 1, 1, '2025-12-02'),
(18, 8, 1, 1, '2025-12-02'),
(19, 9, 1, 1, '2025-12-02'),
(20, 10, 1, 3, '2025-12-02');

INSERT INTO t_asistencias (id_asistencia, id_estudiante, id_horario, id_tipo_asistencia, fecha) VALUES
(21, 1, 1, 1, '2025-12-03'),
(22, 2, 1, 1, '2025-12-03'),
(23, 3, 1, 1, '2025-12-03'),
(24, 4, 1, 1, '2025-12-03'),
(25, 5, 1, 1, '2025-12-03'),
(26, 6, 1, 1, '2025-12-03'),
(27, 7, 1, 1, '2025-12-03'),
(28, 8, 1, 1, '2025-12-03'),
(29, 9, 1, 1, '2025-12-03'),
(30, 10, 1, 1, '2025-12-03');

INSERT INTO t_asistencias (id_asistencia, id_estudiante, id_horario, id_tipo_asistencia, fecha) VALUES
(31, 1, 1, 1, '2025-12-04'),
(32, 2, 1, 1, '2025-12-04'),
(33, 3, 1, 1, '2025-12-04'),
(34, 4, 1, 1, '2025-12-04'),
(35, 5, 1, 1, '2025-12-04'),
(36, 6, 1, 1, '2025-12-04'),
(37, 7, 1, 1, '2025-12-04'),
(38, 8, 1, 2, '2025-12-04'),
(39, 9, 1, 2, '2025-12-04'),
(40, 10, 1, 2, '2025-12-04');

INSERT INTO t_asistencias (id_asistencia, id_estudiante, id_horario, id_tipo_asistencia, fecha) VALUES
(41, 1, 1, 1, '2025-12-05'),
(42, 2, 1, 1, '2025-12-05'),
(43, 3, 1, 1, '2025-12-05'),
(44, 4, 1, 1, '2025-12-05'),
(45, 5, 1, 1, '2025-12-05'),
(46, 6, 1, 1, '2025-12-05'),
(47, 7, 1, 1, '2025-12-05'),
(48, 8, 1, 1, '2025-12-05'),
(49, 9, 1, 2, '2025-12-05'),
(50, 10, 1, 3, '2025-12-05');
